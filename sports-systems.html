<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BrainHustle‚Ñ¢ ‚Äì Sports Systems (Upgraded Members)</title>
  <meta name="description" content="BrainHustle‚Ñ¢ Upgraded: sports betting systems and tools ‚Äî odds converter, no-vig pricing, Kelly sizing, CLV tracker, and a downloadable bet log. Education only."/>
  <style>
    :root{--bg:#0a0a0a;--panel:#121212;--ink:#fff;--muted:#b7b7b7;--accent:#00ff66;--accent2:#00cc66}
    html,body{margin:0;background:var(--bg);color:var(--ink);font-family:Arial,Helvetica,sans-serif}
    a{color:var(--accent);text-decoration:none}
    .wrap{max-width:1120px;margin:0 auto;padding:26px 18px 64px}
    .topbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
    .brand{font-weight:700;font-size:22px}
    .menu-button{background:var(--accent2);border:none;border-radius:8px;padding:8px 12px;color:#000;font-size:18px;cursor:pointer}
    .side-menu{position:fixed;top:0;left:-260px;width:260px;height:100%;background:#111;border-right:1px solid #222;z-index:999;transition:left .25s ease}
    .side-menu a{display:block;color:#fff;padding:12px 18px;border-bottom:1px solid #222}
    .side-menu a:hover{background:#191919}
    .hero{padding:16px;border:1px solid #1c1c1c;border-radius:14px;background:linear-gradient(180deg,#0f0f0f,#0a0a0a);margin-bottom:16px}
    .hero h1{margin:6px 0 6px;font-size:24px}
    .hero p{color:var(--muted);line-height:1.5}
    .pill{display:inline-block;padding:3px 8px;border:1px solid #2a2a2a;border-radius:999px;margin-right:6px;color:#ddd;font-size:12px}
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:980px){.grid{grid-template-columns:1fr 1fr}}
    .card{background:var(--panel);border:1px solid #1d1d1d;border-radius:14px;padding:16px}
    .card h2{margin:0 0 10px;font-size:20px}
    .card h3{margin:10px 0 8px;font-size:16px;color:var(--accent)}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    label{display:block;margin:10px 0 6px}
    input[type="number"],input[type="text"]{width:100%;padding:10px;border-radius:10px;border:1px solid #2a2a2a;background:#0f0f0f;color:#fff}
    .btn{background:var(--accent);color:#000;border:none;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700}
    .btn.secondary{background:#1e1e1e;color:#fff;border:1px solid #2a2a2a}
    .result{margin-top:12px;padding:12px;border-radius:12px;background:#0f0f0f;border:1px solid #222}
    .muted{color:var(--muted)}
    .kicker{font-size:12px;color:var(--muted);margin-top:6px}
    .copy-line{display:flex;gap:8px;align-items:center;margin:8px 0}
    .copy-target{padding:10px;background:#0f0f0f;border:1px solid #222;border-radius:10px;color:#ddd;overflow:auto;white-space:pre-wrap}
    .downloads a{display:inline-block;margin-right:12px;margin-bottom:8px}
    .ok{color:#7CFC00}.warn{color:#ffcf33}.bad{color:#ff6b6b}
    .foot{margin-top:18px;color:#888;font-size:12px}
    /* gating containers */
    #upgradedContent,#starterTeaser{display:none}
    .center{ text-align:center }
  </style>
</head>
<body>
  <!-- Side Menu -->
  <nav id="sideMenu" class="side-menu">
    <a href="dashboard.html">üè† Dashboard</a>
    <a href="ideas.html">üí° Ideas</a>
    <a href="kits.html">üß∞ Kits</a>
    <a href="about.html">‚ÑπÔ∏è About</a>
    <a href="upgrade.html">‚¨ÜÔ∏è Upgrade</a>
    <a href="sports-systems.html">üèà Sports Systems</a>
  </nav>

  <div class="wrap">
    <div class="topbar">
      <div class="brand">üß† BrainHustle‚Ñ¢ <span class="muted">Sports Systems</span></div>
      <button class="menu-button" onclick="toggleMenu()">‚ò∞ Menu</button>
    </div>

    <section class="hero">
      <h1>Upgraded Members: Data-Driven Sports Systems</h1>
      <p>Not picks. <b>Process</b>. You‚Äôll get calculators and a bet-tracking system to control risk and measure edge:
      <b>odds converter</b>, <b>no-vig fair pricing</b>, <b>Kelly bet sizing</b>, and <b>CLV checker</b>.</p>
      <div>
        <span class="pill">1‚Äì2% per bet</span>
        <span class="pill">Line-shopping</span>
        <span class="pill">Track CLV</span>
        <span class="pill">No-vig math</span>
      </div>
    </section>

    <!-- Starter Teaser (shown if not upgraded) -->
    <div id="starterTeaser" class="card center">
      <h2>Upgrade Required</h2>
      <p class="muted">This Sports Systems module is for <b>Upgraded</b> members only.</p>
      <a class="btn" href="upgrade.html">Unlock Now</a>
      <div class="kicker">Already upgraded? Make sure you‚Äôre logged in with the same email.</div>
    </div>

    <!-- Upgraded Content (shown if upgraded) -->
    <div id="upgradedContent">

      <div class="grid">
        <!-- Odds Converter -->
        <div class="card">
          <h2>Odds Converter & Implied Probability</h2>
          <div class="row">
            <div>
              <label>American Odds</label>
              <input id="oddsAmerican" type="number" placeholder="-110"/>
            </div>
            <div>
              <label>Decimal Odds</label>
              <input id="oddsDecimal" type="number" step="0.001" placeholder="1.909"/>
            </div>
          </div>
          <div class="row">
            <div>
              <label>Fractional Odds</label>
              <input id="oddsFractional" type="text" placeholder="11/10"/>
            </div>
            <div>
              <label>Implied Probability (%)</label>
              <input id="oddsProb" type="number" step="0.01" placeholder="52.38"/>
            </div>
          </div>
          <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn" onclick="convertFromAmerican()">Convert from American</button>
            <button class="btn" onclick="convertFromDecimal()">Convert from Decimal</button>
            <button class="btn" onclick="convertFromFractional()">Convert from Fractional</button>
            <button class="btn secondary" onclick="clearOdds()">Clear</button>
          </div>
          <div class="result muted kicker">Implied probability ignores vig.</div>
        </div>

        <!-- No-Vig -->
        <div class="card">
          <h2>No-Vig (Fair) Probabilities ‚Äî Two-Way Market</h2>
          <div class="row">
            <div>
              <label>Side A (American)</label>
              <input id="nvA" type="number" placeholder="-110"/>
            </div>
            <div>
              <label>Side B (American)</label>
              <input id="nvB" type="number" placeholder="-110"/>
            </div>
          </div>
          <div style="margin-top:10px">
            <button class="btn" onclick="calcNoVig()">Calculate Fair %</button>
          </div>
          <div id="nvOut" class="result"></div>
          <div class="kicker">Fair splits normalize the implied probs to 100% total.</div>
        </div>

        <!-- Kelly -->
        <div class="card">
          <h2>Kelly Bet Sizing</h2>
          <div class="row">
            <div>
              <label>Bankroll ($)</label>
              <input id="kellyBank" type="number" step="0.01" placeholder="500"/>
            </div>
            <div>
              <label>Offered Odds (American)</label>
              <input id="kellyAmerican" type="number" placeholder="-110"/>
            </div>
          </div>
          <div class="row">
            <div>
              <label>Your True Win Probability (%)</label>
              <input id="kellyP" type="number" step="0.01" placeholder="53"/>
            </div>
            <div>
              <label>Fractional Kelly (0.25‚Äì1.0)</label>
              <input id="kellyFrac" type="number" step="0.05" value="0.5"/>
            </div>
          </div>
          <div style="margin-top:10px">
            <button class="btn" onclick="calcKelly()">Calculate Kelly</button>
          </div>
          <div id="kellyOut" class="result"></div>
          <div class="kicker">If Kelly ‚â§ 0 ‚Üí edge is negative ‚Üí No bet.</div>
        </div>

        <!-- CLV -->
        <div class="card">
          <h2>CLV (Closing Line Value) Checker</h2>
          <div class="row">
            <div>
              <label>Your Price (American)</label>
              <input id="clvYours" type="number" placeholder="-110"/>
            </div>
            <div>
              <label>Closing Price (American)</label>
              <input id="clvClose" type="number" placeholder="-120"/>
            </div>
          </div>
          <div style="margin-top:10px">
            <button class="btn" onclick="calcCLV()">Check CLV</button>
          </div>
          <div id="clvOut" class="result"></div>
          <div class="kicker">Consistently beating the closing price is a strong signal of edge.</div>
        </div>

        <!-- Downloads & Copyables -->
        <div class="card">
          <h2>Upgraded Downloads & Copyables</h2>
          <p class="muted">Use the log to track stake %, odds, and CLV. Flat bet 1‚Äì2% until you‚Äôve proven edge.</p>
          <div class="downloads">
            <a class="btn" href="/assets/BrainHustle_Sports_Log.xlsx" download>‚¨áÔ∏è Sports Betting Log (.xlsx)</a>
            <a class="btn secondary" href="/assets/BrainHustle_Sports_Log.csv" download>‚¨áÔ∏è CSV Version</a>
          </div>

          <h3>Copy: CSV Header</h3>
          <div class="copy-line">
            <button class="btn" onclick="copyById('csvHeader')">Copy</button>
            <div id="csvHeader" class="copy-target">Date (YYYY-MM-DD),Sport,League,Event / Matchup,Book,Bet Type (ML/Spread/Total/Prop),Side/Selection,American Odds,Decimal Odds,Stake ($),Line (e.g., -3.5 / 47.5),Result (W/L/P),Payout ($),Profit/Loss ($),Bankroll Before ($),Bankroll After ($),Closing Line (Book),Closing Odds (American),CLV (Closing - Your Odds, in cents),Notes</div>
          </div>

          <h3>Copy: Responsible-Play Block</h3>
          <div class="copy-line">
            <button class="btn" onclick="copyById('legalBlock')">Copy</button>
            <div id="legalBlock" class="copy-target">BrainHustle‚Ñ¢ provides educational content only. Nothing here is betting advice or a guarantee of profit.
Sports betting involves risk. Only bet what you can afford to lose. Must be 21+ (or legal age in your jurisdiction).
Check and follow all local laws; availability varies by state/country. If gambling is a problem, seek help (e.g., 1-800-GAMBLER in the U.S.). By using this site you accept our Terms, Disclaimers, and Privacy Policy.</div>
          </div>
        </div>

        <!-- Playbook -->
        <div class="card">
          <h2>Daily Playbook</h2>
          <ol>
            <li>Specialize (e.g., NCAAF spreads).</li>
            <li>Make a fair line or % (even simple models beat vibes).</li>
            <li>Shop 2‚Äì4 books; take the best price.</li>
            <li>Sanity-check with the No-Vig calculator.</li>
            <li>Stake 1‚Äì2% (or fractional Kelly if your edge is proven).</li>
            <li>Record every bet and track CLV.</li>
            <li>Weekly review: if you aren‚Äôt beating the close, tune inputs.</li>
          </ol>
          <div class="kicker">Next phase: add pace/efficiency stats, simulate totals, flag misprices automatically.</div>
        </div>

        <!-- Education Roadmap -->
        <div class="card">
          <h2>Education Roadmap</h2>
          <ul>
            <li><b>101:</b> Odds, vig, implied probability, bet types</li>
            <li><b>201:</b> Bankroll, variance, unit sizing</li>
            <li><b>301:</b> No-vig pricing, CLV, line-shopping</li>
            <li><b>401:</b> Simple models (pace, efficiency, injuries)</li>
            <li><b>501:</b> EV + uncertainty, fractional Kelly</li>
          </ul>
        </div>
      </div>

      <div class="foot">¬© BrainHustle‚Ñ¢ ‚Äî Education only. Nothing here is financial, legal, or betting advice.</div>
    </div>
  </div>

  <script>
    function toggleMenu(){
      const m = document.getElementById('sideMenu');
      m.style.left = (m.style.left === '0px') ? '-260px' : '0px';
    }
    function copyById(id){
      const el = document.getElementById(id);
      navigator.clipboard.writeText(el.textContent.trim());
    }
    // ===== Tools (your existing JS) =====
    const toProb=(price)=> price>0 ? 100/(price+100) : (-price)/(-price+100);
    const toDec=(price)=> price>0 ? (price/100)+1 : (100/(-price))+1;
    const fromDec=(d)=> d>=2 ? Math.round((d-1)*100) : Math.round(-100/(d-1));
    function convertFromAmerican(){
      const a=Number(document.getElementById('oddsAmerican').value);
      if(!a) return;
      document.getElementById('oddsDecimal').value=toDec(a).toFixed(3);
      document.getElementById('oddsProb').value=(toProb(a)*100).toFixed(2);
      const frac=a>0?`${a}/100`:`100/${-a}`;
      document.getElementById('oddsFractional').value=frac;
    }
    function convertFromDecimal(){
      const d=Number(document.getElementById('oddsDecimal').value);
      if(!d) return;
      document.getElementById('oddsAmerican').value=fromDec(d);
      document.getElementById('oddsProb').value=((1/d)*100).toFixed(2);
      const num=Math.round((d-1)*100), den=100; document.getElementById('oddsFractional').value=`${num}/${den}`;
    }
    function convertFromFractional(){
      const f=document.getElementById('oddsFractional').value.trim();
      if(!f.includes('/')) return;
      const [num,den]=f.split('/').map(Number); const d=1+(num/den);
      document.getElementById('oddsDecimal').value=d.toFixed(3);
      document.getElementById('oddsAmerican').value=fromDec(d);
      document.getElementById('oddsProb').value=((1/d)*100).toFixed(2);
    }
    function clearOdds(){['oddsAmerican','oddsDecimal','oddsFractional','oddsProb'].forEach(id=>document.getElementById(id).value='');}

    function calcNoVig(){
      const a=Number(document.getElementById('nvA').value), b=Number(document.getElementById('nvB').value);
      if(!a||!b) return;
      const pA=toProb(a), pB=toProb(b), sum=pA+pB; const fA=(pA/sum)*100, fB=(pB/sum)*100;
      document.getElementById('nvOut').innerHTML = `Fair A: <b>${fA.toFixed(2)}%</b> ‚Ä¢ Fair B: <b>${fB.toFixed(2)}%</b>`;
    }
    function calcKelly(){
      const bank=Number(document.getElementById('kellyBank').value);
      const price=Number(document.getElementById('kellyAmerican').value);
      const p=Number(document.getElementById('kellyP').value)/100;
      const frac=Math.max(0, Number(document.getElementById('kellyFrac').value||0.5));
      if(!bank||!price||!p) return;
      const b = toDec(price)-1; // decimal payout minus 1
      const k = (b*p - (1-p)) / b; // Kelly fraction of bankroll
      const bet = Math.max(0, k*frac*bank);
      document.getElementById('kellyOut').innerHTML = k<=0
        ? '<span class="bad">Edge ‚â§ 0 ‚Üí No bet.</span>'
        : `Full Kelly: ${(k*100).toFixed(2)}% ‚Ä¢ Bet (x${frac}): <b>$${bet.toFixed(2)}</b>`;
    }
    function calcCLV(){
      const yours=Number(document.getElementById('clvYours').value);
      const close=Number(document.getElementById('clvClose').value);
      if(!yours||!close) return;
      const yourDec=toDec(yours), closeDec=toDec(close);
      const yourImp=1/yourDec, closeImp=1/closeDec;
      const edge=((closeImp-yourImp)*100).toFixed(2);
      document.getElementById('clvOut').innerHTML = `Your imp: ${ (yourImp*100).toFixed(2)}% ‚Ä¢ Close imp: ${(closeImp*100).toFixed(2)}% ‚Ä¢ <b>Edge vs close: ${edge}%</b>`;
    }
  </script>

  <!-- üîê Membership gating (Realtime Database | FREE) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";
    import { getDatabase, ref, child, get } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyA1cS4bIOxNAQuDFsyRq6mGzz9xeKqKFiY",
      authDomain: "brainhustle-92a40.firebaseapp.com",
      projectId: "brainhustle-92a40",
      storageBucket: "brainhustle-92a40.appspot.com",
      messagingSenderId: "547592914180",
      appId: "1:547592914180:web:be4969f6a657c2b6c9bc51",
      databaseURL: "https://brainhustle-92a40-default-rtdb.firebaseio.com"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const rtdb = getDatabase(app);

    const OWNER_UID = "bMPlkmhEV8a05M0uwsgxVORsFk72"; // you always get access
    const emailKey = (e)=> e.toLowerCase().replace(/\./g, ',');

    const teaser = document.getElementById('starterTeaser');
    const premium = document.getElementById('upgradedContent');

    const showTeaser = ()=>{ teaser.style.display='block'; premium.style.display='none'; };
    const showPro    = ()=>{ teaser.style.display='none'; premium.style.display='block'; };

    async function fetchLevel(user){
      try{
        if(user.uid === OWNER_UID) return 'upgraded';
        const uidSnap = await get(child(ref(rtdb), `/members/${user.uid}/level`));
        if(uidSnap.exists()) return uidSnap.val();
        if(user.email){
          const mailSnap = await get(child(ref(rtdb), `/membersByEmail/${emailKey(user.email)}/level`));
          if(mailSnap.exists()) return mailSnap.val();
        }
      }catch(e){ console.error(e); }
      return 'starter';
    }

    onAuthStateChanged(auth, async (user)=>{
      if(!user){ showTeaser(); return; } // or redirect to login.html if you prefer
      const level = (await fetchLevel(user)).toLowerCase();
      level === 'upgraded' ? showPro() : showTeaser();
    });
  </script>
</body>
</html>
